var t;!function(t){t.ARRAYTYPE="[object Array]",t.OBJECTTYPE="[object Object]",t.FUNCTIONTYPE="[object Function]"}(t||(t={}));const e=t.ARRAYTYPE,n=t.OBJECTTYPE,i=t.FUNCTIONTYPE,s=require("rfdc")();function o(t,e){const n={};return e?(c(t,e),f(t,e,"",n),n):t}function c(t,i){if(t===i)return;const s=l(t),o=l(i);if(s==n&&o==n)for(let e in i){const n=t[e];void 0===n?t[e]=null:c(n,i[e])}else s==e&&o==e&&t.length>=i.length&&i.forEach(((e,n)=>{c(t[n],e)}))}function r(t,e,n){l(n)!=i&&(t[e]=n)}function f(t,i,s,o){if(t===i)return;const c=l(t),u=l(i);if(c==n)if(u!=n||Object.keys(t).length<Object.keys(i).length&&""!==s)r(o,s,t);else for(let c in t){const u=t[c],h=i[c],d=l(u),g=l(h);if(d!=e&&d!=n)u!==i[c]&&r(o,a(s,c),u);else if(d==e)g!=e||u.length<h.length?r(o,a(s,c),u):u.forEach(((t,e)=>{f(t,h[e],a(s,c)+"["+e+"]",o)}));else if(d==n)if(g!=n||Object.keys(u).length<Object.keys(h).length)r(o,a(s,c),u);else for(let t in u){const e=a(s,c)+(t.includes(".")?`["${t}"]`:`.${t}`);f(u[t],h[t],e,o)}}else c==e?u!=e||t.length<i.length?r(o,s,t):t.forEach(((t,e)=>{f(t,i[e],s+"["+e+"]",o)})):r(o,s,t)}function a(t,e){return e.includes(".")?t+`["${e}"]`:(""==t?"":t+".")+e}function l(t){return Object.prototype.toString.call(t)}function u(t,e){const n=o(t.data,t._westorePrevData);t.setData(n,e),t._westorePrevData=s(t.data)}var h={diffData:o,update:u,Store:class{constructor(){this.views={}}bind(t,e){this.data=e.data,this.views[t]=e}update(t){if(t)u(this.views[t]);else for(const t in this.views)u(this.views[t])}}};export{h as default};
//# sourceMappingURL=index.esm.min.js.map
